#!/usr/bin/env python
#-*- coding: utf8 -*-
'''
  Small program for quick access to SNS magnetism reflectometer raw data.
'''

import sys
# first thing to do is starting the logging system
from quick_nxs.gui_logging import setup_system, check_runstate

def _run(argv=[]):
  from PyQt4.QtGui import QApplication, QSplashScreen, QPixmap
  app=QApplication(argv)
  from quick_nxs import icons_rc  #@UnusedImport
  splash=QSplashScreen(QPixmap(u':/General/logo_hq.png'))
  splash.show()
  from quick_nxs.main_gui import MainGUI
  window=MainGUI(argv)
  window.show()
  splash.finish(window)
  return app.exec_()

if __name__=='__main__':
  if check_runstate():
    # make sure the debug.log is not overwritten and only one version
    # of the program per user is running
    print "Another instance is already running"
    sys.exit(0)
  setup_system()
  sys.exit(_run(sys.argv[1:]))
